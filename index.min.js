"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function flash(opts){var options=opts||{};// apply default options
var renderTarget=options.element||document.body;var duration=options.duration||800;var zIndex="".concat(options.zIndex||1000);var colorFlash=options.colorFlash||"rgba(255, 255, 255, 1)";var colorBlur=options.colorBlur||"rgba(192, 192, 255, 1)";var style=addStyles(colorFlash,colorBlur);var w=renderTarget.clientWidth;var h=renderTarget.clientHeight;var id="lncontainer-".concat(new Date().getTime());var renderContainer=document.createElement("div");renderContainer.className="lncontainer";renderContainer.style.zIndex=zIndex;renderContainer.id=id;renderTarget.insertBefore(renderContainer,renderTarget.firstChild);drawSvgFlash(renderContainer,w,h);startAnimation("lnbox0",duration);startAnimation("lnbox1",duration);setTimeout(function(){renderTarget.removeChild(renderContainer);document.body.removeChild(style)},duration)}function startAnimation(id,duration){document.getElementById(id).style.animationDuration="".concat(duration/1000,"s");document.getElementById(id).style.animationPlayState="running"}function drawSvgFlash(renderContainer,w,h){var x=w/2;var y=h/2;var w2=w/2;var h2=h/2;var mm2=Math.max(h2,w2);var mm2b=mm2*Math.sqrt(2);var dlx;var dly;var coords="";var svgs=["","",""];var dist=0;var lagom=mm2/20;var px,py;var dir=0;drawPath();newPoint();var s=[];var lx=x;var ly=y;var ll=0;for(var i=0;i<200;i++){xy(x,y);if(ll===10){dist++;s.push([dist,dir,lx,ly,x,y])}lx=x;ly=y;dir+=0.75*2*Math.PI*(Math.random()-.5);x+=Math.sin(dir)*lagom*0.75+px;y+=Math.cos(dir)*lagom*0.75+py;if(ll>3&&Math.random()<0.01&&s.length>0){drawPath();dlx=0;dly=0;var _s$Math$floor=_slicedToArray(s[Math.floor(Math.random()*s.length)],6);dist=_s$Math$floor[0];dir=_s$Math$floor[1];lx=_s$Math$floor[2];ly=_s$Math$floor[3];x=_s$Math$floor[4];y=_s$Math$floor[5];xy(lx,ly);xy(x,y);ll=0}ll++}drawPath();dlx=0;dly=0;renderContainer.innerHTML="\n    <svg class=\"lnbox lnbox1\" id=\"lnbox1\" viewBox=\"0 0 ".concat(w," ").concat(h,"\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <filter id=\"f1\" x=\"0\" y=\"0\">\n          <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"1\" />\n        </filter>\n        <filter id=\"f2\" x=\"0\" y=\"0\">\n          <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"1\" />\n        </filter>\n        <filter id=\"f3\" x=\"0\" y=\"0\">\n          <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"4\" />\n        </filter>\n      </defs>\n      ").concat(svgs[1],"\n    </svg>\n    <svg class=\"lnbox lnbox0\" id=\"lnbox0\" viewBox=\"0 0 ").concat(w," ").concat(h,"\" xmlns=\"http://www.w3.org/2000/svg\">\n      <defs>\n        <filter id=\"f1\" x=\"0\" y=\"0\">\n          <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"1\" />\n        </filter>\n        <filter id=\"f2\" x=\"0\" y=\"0\">\n          <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"1\" />\n        </filter>\n        <filter id=\"f3\" x=\"0\" y=\"0\">\n          <feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"4\" />\n        </filter>\n      </defs>\n      ").concat(svgs[0],"\n    </svg>");function drawPath(){var b="";if(dist>1){b=" b"}if(dist>2){b=" c"}if(coords){svgs[1]+="<path  class='ln ln1".concat(b,"' d=\"m ").concat(coords,"\" fill=\"none\"/>");svgs[0]+="<path  class='ln ln0".concat(b,"' d=\"m ").concat(coords,"\" fill=\"none\"/>")}coords="";dlx=0;dly=0}function xy(x,y){var dx=Math.floor(x-dlx);var dy=Math.floor(y-dly);coords+=" "+dx;coords+=" "+dy;dlx+=dx;dly+=dy}function newPoint(){dir=2*Math.PI*Math.random();dir=0.5*Math.PI*(Math.random()-.5);px=Math.sin(dir)*lagom*.5;py=Math.cos(dir)*lagom*.5;x=Math.sin(dir)*-mm2b+w2;y=Math.cos(dir)*-mm2b+h2}}function addStyles(colorFlash,colorBlur){var sheet=document.createElement("style");sheet.innerHTML="\n  svg .ln {\n      filter: ' feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"15\" ';\n      fill: '#ff0';\n  }\n  \n  svg .ln0 {\n      stroke: ".concat(colorFlash,";\n      stroke-width: 2;\n  }\n  \n  svg .ln0.b {\n      stroke-width: 1;\n  }\n  \n  svg .ln0.c {\n      stroke-width: .5;\n  }\n  \n  svg .ln1 {\n      stroke: ").concat(colorBlur,";\n      stroke-width: 10;\n  }\n  \n  @keyframes lnanim {\n      0% {\n          opacity: 1;\n          background: rgba(255, 255, 255, .5);\n      }\n      20% {\n          opacity: 1;\n          background: rgba(0, 0, 0, .5);\n      }\n      50% {\n          opacity: 1;\n          background: rgba(255, 255, 255, .5);\n      }\n      100% {\n          opacity: 0;\n          background: rgba(0, 0, 0, 0);\n      }\n  }\n  \n  svg.lnbox {\n      position: absolute;\n      top: 0;\n      left: 0;\n      animation: lnanim 0.5s ease 0s 1 normal both paused;\n  }\n  \n  svg.lnbox1 {\n      filter: blur(13px);\n  }");document.body.appendChild(sheet);return sheet}module.exports={flash:flash};
